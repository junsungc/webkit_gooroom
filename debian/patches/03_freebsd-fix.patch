Index: webkit-1.6.1/Source/JavaScriptCore/config.h
===================================================================
--- webkit-1.6.1.orig/Source/JavaScriptCore/config.h	2011-10-23 20:40:41.000000000 -0200
+++ webkit-1.6.1/Source/JavaScriptCore/config.h	2011-10-24 00:06:35.485396815 -0200
@@ -92,7 +92,7 @@
 #define WTF_USE_OS_RANDOMNESS 1
 #endif
 
-#if OS(FREEBSD) || OS(OPENBSD)
+#if (OS(FREEBSD) || OS(OPENBSD)) && !defined(__GLIBC__)
 #define HAVE_PTHREAD_NP_H 1
 #endif
 
Index: webkit-1.6.1/Source/JavaScriptCore/wtf/Platform.h
===================================================================
--- webkit-1.6.1.orig/Source/JavaScriptCore/wtf/Platform.h	2011-10-23 20:40:41.000000000 -0200
+++ webkit-1.6.1/Source/JavaScriptCore/wtf/Platform.h	2011-10-24 00:09:35.976441865 -0200
@@ -343,7 +343,7 @@
 #endif
 
 /* OS(FREEBSD) - FreeBSD */
-#if defined(__FreeBSD__) || defined(__DragonFly__)
+#if defined(__FreeBSD__) || defined(__DragonFly__) || defined(__FreeBSD_kernel__)
 #define WTF_OS_FREEBSD 1
 #endif
 
@@ -675,7 +675,7 @@
 #endif
 
 #if !defined(HAVE_STRNSTR)
-#if OS(DARWIN) || OS(FREEBSD)
+#if OS(DARWIN) || (OS(FREEBSD) && !defined(__GLIBC__))
 #define HAVE_STRNSTR 1
 #endif
 #endif
