description: fix cve-2010-1392
author: Michael Gilbert <michael.s.gilbert@gmail.com>
origin: http://trac.webkit.org/changeset/56297
===================================================================
Index: webkit-1.2.1/WebCore/rendering/RenderBlock.cpp
===================================================================
--- webkit-1.2.1.orig/WebCore/rendering/RenderBlock.cpp	2010-05-13 16:31:30.000000000 -0400
+++ webkit-1.2.1/WebCore/rendering/RenderBlock.cpp	2010-06-28 20:56:40.000000000 -0400
@@ -4639,7 +4639,7 @@
 
     // Drill into inlines looking for our first text child.
     RenderObject* currChild = firstLetterBlock->firstChild();
-    while (currChild && currChild->needsLayout() && (!currChild->isReplaced() || currChild->isFloatingOrPositioned()) && !currChild->isText()) {
+    while (currChild && currChild->needsLayout() && ((!currChild->isReplaced() && !currChild->isRenderButton() && !currChild->isMenuList()) || currChild->isFloatingOrPositioned()) && !currChild->isText()) {
         if (currChild->isFloatingOrPositioned()) {
             if (currChild->style()->styleType() == FIRST_LETTER)
                 break;
