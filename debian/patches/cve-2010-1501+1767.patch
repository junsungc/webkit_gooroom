description: fix cve-2010-1501 (duplicated as cve-2010-1767 in cve tracker)
author: Michael Gilbert <michael.s.gilbert@gmail.com>
origin: http://trac.webkit.org/changeset/57041
Index: webkit-1.2.1/WebCore/loader/DocumentThreadableLoader.cpp
===================================================================
--- webkit-1.2.1.orig/WebCore/loader/DocumentThreadableLoader.cpp	2010-05-13 16:31:30.000000000 -0400
+++ webkit-1.2.1/WebCore/loader/DocumentThreadableLoader.cpp	2010-06-28 21:40:03.000000000 -0400
@@ -287,6 +287,7 @@
 
 void DocumentThreadableLoader::preflightFailure()
 {
+    m_actualRequest = 0; // Prevent didFinishLoading() from bypassing access check.
     m_client->didFail(ResourceError());
 }
 
