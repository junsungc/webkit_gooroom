description: fix cve-2010-3115
author: Michael Gilbert <michael.s.gilbert@gmail.com>
origin: http://trac.webkit.org/changeset/63925
Index: webkit-1.2.4/WebCore/page/History.cpp
===================================================================
--- webkit-1.2.4.orig/WebCore/page/History.cpp	2010-09-03 16:12:23.000000000 -0400
+++ webkit-1.2.4/WebCore/page/History.cpp	2010-09-06 22:08:52.000000000 -0400
@@ -82,7 +82,7 @@
 
 KURL History::urlForState(const String& urlString)
 {
-    KURL baseURL = m_frame->loader()->baseURL();
+    KURL baseURL = m_frame->document()->url();
     if (urlString.isEmpty())
         return baseURL;
         
